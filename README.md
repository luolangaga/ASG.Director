# ASG导播端

基于Electron的第五人格赛事导播端应用，用于OBS直播时展示BP过程。

## 功能特点

### 三窗口设计
1. **主窗口** - 创建房间并显示队伍链接供复制
2. **前台窗口** - 可自定义布局的观战页面（用于OBS捕获）
3. **后台窗口** - 管理控制面板

### 前台特性
- 四个求生者展示框可拖拽、调整大小
- Ban位展示框可拖拽、调整大小
- 监管者展示框可拖拽、调整大小
- 地图信息、阶段信息、计时器可拖拽
- 支持自定义背景图片
- 布局保存到本地，下次打开自动复用
- 支持导出/导入布局配置（包含背景图片）
- 透明背景，适合OBS色键抠像
- 按 F2 进入/退出编辑模式

### 后台特性
- 实时显示BP状态
- 流程控制（开始BP、下一阶段、暂停、重置）
- 快速跳转到指定阶段
- 前台窗口控制（置顶、全屏）
- 操作日志记录
- 自定义计时器

## 安装

```bash
# 安装依赖
npm install

# 下载SignalR库
# 请从 https://www.npmjs.com/package/@microsoft/signalr 下载 signalr.min.js
# 并放置到 pages/js/ 目录下

# 运行开发版本
npm start

# 打包
npm run build:win  # Windows
npm run build:mac  # macOS
```

## 使用说明

### 1. 启动应用
运行应用后会打开主窗口，输入服务器地址和房间配置。

### 2. 创建房间
点击"创建房间"按钮后会自动：
- 连接到BP服务器
- 创建新房间
- 显示队伍链接供复制
- 打开前台和后台窗口

### 3. 编辑前台布局
在前台窗口按 F2 进入编辑模式：
- 拖拽元素移动位置
- 拖拽角落调整大小
- 点击"更换背景"选择背景图片
- 点击"保存"保存布局
- 点击"导出布局"可将布局分享给他人
- 点击"导入布局"可使用他人的布局

### 4. 后台控制
后台窗口提供以下功能：
- 查看房间信息和当前状态
- 控制BP流程（开始、暂停、下一阶段）
- 快速跳转到指定阶段
- 控制前台窗口（置顶、全屏）
- 查看操作日志

## 目录结构

```
ASG.Director/
├── main.js           # Electron主进程
├── preload.js        # 预加载脚本
├── package.json      # 项目配置
├── pages/
│   ├── main.html     # 主窗口页面
│   ├── frontend.html # 前台页面
│   ├── backend.html  # 后台页面
│   └── js/
│       └── signalr.min.js  # SignalR库
└── assets/           # 应用图标等资源
```

## 配合OBS使用

1. 在OBS中添加"窗口捕获"源
2. 选择"ASG导播 - 前台"窗口
3. 如果背景是透明的，可以使用"色键"滤镜去除背景
4. 调整大小和位置

## 技术栈

- Electron 28+
- SignalR (与ASG.Api通信)
- 原生HTML/CSS/JavaScript

## 注意事项

1. 需要先启动ASG.Api服务器
2. 确保服务器地址配置正确
3. 布局数据保存在用户数据目录中
4. 导出的布局文件包含背景图片（Base64编码）
